# FileHeader (파일 인식 정보)

파일의 가장 앞부분에 위치하며 HWP 파일임을 식별하고 기본 속성을 담고 있습니다.

## 구조 (총 256 바이트)

| 오프셋 | 자료형 | 크기 | 설명 |
|--------|--------|------|------|
| 0 | BYTE[32] | 32 | Signature |
| 32 | DWORD | 4 | 파일 버전 |
| 36 | DWORD | 4 | 속성 플래그 1 |
| 40 | DWORD | 4 | 속성 플래그 2 |
| 44 | DWORD | 4 | 암호화 버전 |
| 48 | BYTE | 1 | KOGL 라이선스 국가 |
| 49 | BYTE[207] | 207 | 예약 영역 |
| **합계** | | **256** | |

## 필드 상세

### Signature (32 바이트)
- **값**: "HWP Document File"
- **인코딩**: ASCII
- **용도**: HWP 파일 식별

### 파일 버전 (4 바이트)
**형식**: `0xMMnnPPrr`

| 바이트 | 필드 | 설명 | 호환성 |
|--------|------|------|--------|
| MM (31-24) | Major | 구조 완전 변경 | 다르면 **호환 불가** |
| nn (23-16) | Minor | 큰 변화 | 다르면 **호환 불가** |
| PP (15-8) | Patch | 레코드 추가 | 다르면 **하위 호환** |
| rr (7-0) | Release | 정보 추가 | 다르면 **하위 호환** |

예시: `0x05000300` = 버전 5.0.3.0

### 속성 플래그 1 (4 바이트)

| 비트 | 속성 | 설명 |
|------|------|------|
| 0 | 압축 | 문서 압축 여부 |
| 1 | 암호 | 암호 설정 여부 |
| 2 | 배포용 | 배포용 문서 여부 |
| 3 | 스크립트 | 스크립트 포함 여부 |
| 4 | DRM | DRM 보안 문서 |
| 5 | XMLTemplate | XML 템플릿 존재 |
| 6 | 문서이력 | 문서 이력 관리 존재 |
| 7 | 전자서명 | 전자 서명 정보 존재 |
| 8 | 공인인증서 | 공인 인증서 암호화 |
| 9 | 서명예비 | 전자 서명 예비 저장 |
| 10 | 공인DRM | 공인 인증서 DRM |
| 11 | CCL | CCL 문서 |
| 12 | 모바일최적화 | 모바일 최적화 |
| 13 | 개인정보보안 | 개인 정보 보안 문서 |
| 14 | 변경추적 | 변경 추적 문서 |
| 15 | KOGL | 공공누리 저작권 |
| 16 | 비디오 | 비디오 컨트롤 포함 |
| 17 | 차례필드 | 차례 필드 컨트롤 포함 |
| 18-31 | 예약 | - |

### 속성 플래그 2 (4 바이트)

| 비트 | 속성 | 설명 |
|------|------|------|
| 0 | 라이선스정보 | CCL/공공누리 라이선스 |
| 1 | 복제제한 | 복제 제한 여부 |
| 2 | 동일조건복제 | 동일 조건 복제 허가 |
| 3-31 | 예약 | - |

### 암호화 버전 (4 바이트)

| 값 | 버전 |
|----|------|
| 0 | 암호화 없음 |
| 1 | 한글 2.5 이하 |
| 2 | 한글 3.0 Enhanced |
| 3 | 한글 3.0 Old |
| 4 | 한글 7.0 이후 |

### KOGL 국가 코드 (1 바이트)

| 값 | 국가 |
|----|------|
| 6 | 한국 (KOR) |
| 15 | 미국 (US) |

## 사용 예시

```c
// FileHeader 구조체
typedef struct {
    char signature[32];      // "HWP Document File"
    uint32_t version;        // 0xMMnnPPrr
    uint32_t flags1;         // 속성 플래그 1
    uint32_t flags2;         // 속성 플래그 2  
    uint32_t encryptVersion; // 암호화 버전
    uint8_t koglCountry;     // KOGL 국가
    uint8_t reserved[207];   // 예약
} FileHeader;

// 압축 여부 확인
bool isCompressed = (header.flags1 & 0x01) != 0;

// 버전 파싱
uint8_t major = (header.version >> 24) & 0xFF;
uint8_t minor = (header.version >> 16) & 0xFF;
```