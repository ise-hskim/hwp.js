# 한글 문서 파일 형식 5.0

문서 파일에서 문단 내용을 읽다가 제어 문자를 발견하면, 문서를 읽는 쪽에서는 제어 문자 종류에 따라 읽어 들이거나 건너 뛰어 다음 데이터의 시작 위치까지 파일 포인터를 옮기기 위한 적절한 처리를 수행해야 한다. 제어 문자 가운데는 또 다른 문단 리스트를 포함하는 경우도 있기 때문에, 제어 문자를 일반 문자처럼 처리하면 문서 파일을 정상적으로 읽을 수 없다.

표, 각주 등과 같은 문단 리스트를 포함하는 컨트롤 문자들은 독자적인 문단 리스트를 가진다. 해당 리스트들은 아래와 같은 리스트 헤더 정보를 포함한다. 실제 문단들은 그 다음에 serialize된다.

문단 내에서 컨트롤은 세 가지 형식에 따라 다음과 같은 차이가 있다.

### 문자 컨트롤

부가정보 없이 문자 하나로 표현되는 제어 문자이다. (3번째 ch)

| 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 | 11 |
|---|---|---|---|---|---|---|---|---|---|----|----|
| 'A' | 'B' | 'C' | ch | 'D' | 'E' | 'F' | 'G' | 'H' | 'I' | 'J' | 13 |

### 인라인 컨트롤

부가정보가 12바이트(6 WCHAR) 이내에서 표현될 수 있는 제어 문자이다. info에 부가정보를 다 넣지 못하는 경우는 확장 컨트롤로 대체된다.(3~9까지 8개의 ch)

| 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 | 11 |
|---|---|---|---|---|---|---|---|---|---|----|----|
| 'A' | 'B' | ch | info | | | | | ch | 'C' | 13 |

### 확장 컨트롤

제어 문자는 포인터를 가지고 있고, 포인터가 가리키는 곳에 실제 오브젝트가 존재하는 제어 문자이다.(3~9까지 8개의 ch)

| 코드 | 설명 | 컨트롤 형식 |
|------|------|------------|
| 4 | 필드 끝 | inline |
| 5-7 | 예약 | inline |
| 8 | title mark | inline |
| 9 | 탭 | inline |
| 10 | 한 줄 끝(line break) | char |
| 11 | 그리기 개체/표 | extended |
| 12 | 예약 | extended |
| 13 | 문단 끝(para break) | char |
| 14 | 예약 | extended |
| 15 | 숨은 설명 | extended |
| 16 | 머리말/꼬리말 | extended |
| 17 | 각주/미주 | extended |
| 18 | 자동번호(각주, 표 등) | extended |
| 19-20 | 예약 | inline |
| 21 | 페이지 컨트롤(감추기, 새 번호로 시작 등) | extended |
| 22 | 책갈피/찾아보기 표식 | extended |
| 23 | 덧말/글자 겹침 | extended |
| 24 | 하이픈 | char |
| 25-29 | 예약 | char |
| 30 | 묶음 빈칸 | char |
| 31 | 고정폭 빈칸 | char |

**표 6 제어 문자**

11